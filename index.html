<!DOCTYPE html>
<html>
  <head>
    <title>Patient Data Collection App</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      body {
        padding: 20px;
      }

      .container {
        max-width: 100%;
        margin: 0 auto;
      }

      .section {
        margin-bottom: 20px;
      }

      #handwritingCanvas {
        border: 1px solid #000;
        touch-action: none;
        width: 90%; /* 90% width on mobile devices */
        max-width: 75%; /* 75% width on laptops */
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center">Patient Data Collection App</h1>
      <div class="section">
        <h2>Voice Recording</h2>
        <div class="text-center">
          <button type="button" class="btn btn-primary" id="startRecording">
            Start
          </button>
          <button
            type="button"
            class="btn btn-danger"
            id="stopRecording"
            disabled
          >
            Stop
          </button>
        </div>
        <div id="waveform"></div>
        <div id="timer" class="text-center"></div>
      </div>
      <div class="section">
        <h2>Handwriting</h2>
        <div class="text-center">
          <canvas id="handwritingCanvas"></canvas>
          <button type="button" class="btn btn-primary mt-2" id="eraseCanvas">
            Erase
          </button>
          <button
            type="button"
            class="btn btn-success mt-2"
            id="downloadCanvas"
          >
            Download
          </button>
        </div>
      </div>
      <div class="section">
        <h2>Accelerometer Data</h2>
        <div id="accelerometerData" class="text-center"></div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/4.0.1/wavesurfer.min.js"></script>
    <script>
      // Handwriting
      const canvas = document.getElementById("handwritingCanvas");
      const ctx = canvas.getContext("2d");
      let isDrawing = false;

      function startDrawing(e) {
        isDrawing = true;
        ctx.beginPath();
        ctx.moveTo(getX(e), getY(e));
      }

      function draw(e) {
        if (!isDrawing) return;
        ctx.lineTo(getX(e), getY(e));
        ctx.stroke();
      }

      function stopDrawing() {
        isDrawing = false;
      }

      function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }

      function getX(e) {
        if (e.type === "touchmove" || e.type === "touchend") {
          return e.touches[0].clientX - canvas.offsetLeft;
        } else {
          return e.clientX - canvas.offsetLeft;
        }
      }

      function getY(e) {
        if (e.type === "touchmove" || e.type === "touchend") {
          return e.touches[0].clientY - canvas.offsetTop;
        } else {
          return e.clientY - canvas.offsetTop;
        }
      }

      canvas.addEventListener("mousedown", startDrawing);
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseup", stopDrawing);
      canvas.addEventListener("touchstart", startDrawing);
      canvas.addEventListener("touchmove", draw);
      canvas.addEventListener("touchend", stopDrawing);
      document
        .getElementById("eraseCanvas")
        .addEventListener("click", clearCanvas);

      // Rest of the code remains the same...
    </script>
  </body>
</html>
